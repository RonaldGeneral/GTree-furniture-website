<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="/fixed-layout/fixed-layout.js" type="text/javascript"></script>
        <script>head("Live Chat");</script>
    </head>
    <body>
        <script>body();</script>
            <!--Content part-->
            <style>
                /*upper part of the chat*/
                #general-sentence{
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 35px;
                    color: white;
                    vertical-align: middle;
                    background-color: #7E91AF;
                    min-height: 50px;
                    margin: 0px;
                    text-align: center;
                    
                }

                div.title{
                    background-color: #26c5b8;
                    padding: 10px 0px;
                    padding-right: 70%;
                    width: 100%;
                    display: flex;
                    align-items: center;
                    justify-content: space-around;
                    flex-wrap: wrap;
                }
                div.title span{
                    font-size: 30px;
                    margin: 0px 10px;
                }

                #profile-picture{
                    position: relative;
                    margin: 0px 10px;
                }

                #active-sign{
                    background-color: rgb(49, 162, 76);
                    width: 20px;
                    height: 20px;
                    border-radius: 10px;
                    margin: 0px 10px;
                    position: absolute;
                    top: 49px;
                    left: 54px;
                    border: 2px solid rgb(38, 197, 184);
                }
                
                @media screen and (max-width: 750px) {
                    div.title{
                        padding-right: 0px;
                    }
                }

                /*content part of chat*/
                #chat-content{
                    height: 450px;
                    overflow-x: hidden;
                    overflow-y:auto;
                    vertical-align: bottom;
                    background-color: rgba(207, 232, 204, 0.692);
                
                }
                #current-time{
                    background-color: #308C88;
                    color: white;
                    text-align: center;
                    font-size: 20px;
                }
                .receptionist{
                    width: fit-content;
                    max-width: 45%;
                    padding: 10px;
                    margin: 10px;
                    
                    border-radius: 10px;
                    background-color: rgb(238, 230, 235);
                    word-wrap: break-word;
                    font-size: 23px;
                }
                .customer{
                    width: fit-content;
                    max-width: 45%;
                    padding: 10px;
                    margin: 5px 10px 5px 0px;
                    
                    
                    border-radius: 10px;
                    background-color: rgb(0,132,255);
                    color: white;
                    font-size: 23px;
                    word-wrap: break-word;
                    float: right;
                    clear: both;
                    white-space: pre-wrap;
                }
                form{
                    display: flex;
                }
                form textarea{
                    font-size: 25px;
                    flex: 5 5 85%;
                    padding: 5px;
                }
                
                form button{
                    font-size: 25px;
                    flex: 1 1 15%;
                    background-color: #26c5b8;
                }
                article{
                    max-width:75%;
                    margin: auto;
                }
            </style>
            <article>
                <p id="general-sentence">Anything to ask? We are here to help you&#128522;&#128522;</p>
                <div class="title">
                    <div id="profile-picture">
                        <img src="livechat-assets/profile-pic.jpg" alt="profile picture" width="80px" height="80px" style="border-radius: 200px;">
                        <div id="active-sign"></div>
                    </div>
                    <span>Steffi</span>
                    <span style="font-size: 22px; color: rgb(49, 162, 76); font-weight: bold;">Active</span>
                </div>

                <div id="current-time"></div>

                <div id="chat-content">
                <div class="receptionist" title="Steffi">Hi, nice to meet you. I'm Steffi</div>
                <div class="receptionist" title="Steffi">What could I help you?</div>
                </div>
                <form id="chatarea">
                    <textarea autofocus id="chatbar" placeholder="Click here to type" rows="3" cols="1" onkeypress="check(event)"></textarea>
                    <button type="button" onclick="send()">Send</button>
                </form>
                
                <script type="text/javascript">
                    //set the time for the chat
                    var today = new Date();
                    var day = today.toLocaleTimeString();
                    document.getElementById("current-time").innerHTML = today.toLocaleTimeString();

                    //check the user input validity and send message if press enter
                    function check(event)
                    {
                        var x = event.which;
                        if (event.shiftKey)
                        {
                            if (x==13)
                            {
                                var temp = document.getElementById("chatbar").innerText;
                                document.getElementById("chatbar").innerText = temp;
                            }
                        }
                        else if (x==13)
                        {
                            event.preventDefault();
                            send();                            
                        }
                    }

                    //print the message to the chat
                    function send()
                    {
                        var chatbar = document.getElementById("chatbar");
                        if (chatbar.value != "")
                        {
                            var tag = document.createElement("div");
                            tag.setAttribute("class", "customer");
                            tag.setAttribute("title", "customer");

                            var message = document.createTextNode(document.getElementById("chatbar").value);
                            tag.appendChild(message);

                            var chatbox = document.getElementById("chat-content");
                            chatbox.appendChild(tag);

                            var scroll = document.getElementById("chat-content");
                            scroll.scrollBy(0, 1000000);
                            
                            document.getElementById("chatarea").reset();
                            document.getElementById("chatarea").focus();                        
                        }                     
                    }                                        
                </script>
            </article>
            
       <script>footer();</script>
</body>
</html>